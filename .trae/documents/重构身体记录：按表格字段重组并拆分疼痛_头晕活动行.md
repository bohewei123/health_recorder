## 目标对齐（按你给的表格）
- 将原“身体感觉（0～10）”在界面与数据层明确拆成两项：疼痛感觉（0～10）与头晕感觉（0～10）
- 在“加重/减轻疼痛的活动”之外，新增两行：加重头晕的活动、减轻头晕的活动
- 保留现有“日期 + 时段（早起/上午/中午/下午/晚上）”作为表格中“日期/时间”的实现方式

## 前端改动（记录格式重构）
- 重构 [DailyRecord.jsx](file:///Users/zhilinyang/Desktop/health_recorder/frontend/src/pages/DailyRecord.jsx)
  - 以表格行的顺序重新组织表单：
    - 疼痛感觉（0–10）→ 复用现有 `pain_level`
    - 头晕感觉（0–10）→ 复用现有 `dizziness_level`
    - （表格已有）情绪状态（0–10）→ 新增 `mood_level`
    - 描述身体感觉 → 新增文本字段（如 `body_feeling_note`）
    - 前夜睡眠情况 → 新增文本字段（如 `sleep_note`）
    - 当日身体活动情况 → 新增文本字段（如 `daily_activity_note`）
    - 加重疼痛的活动 / 减轻疼痛的活动 → 新增两项文本字段
    - 加重头晕的活动 / 减轻头晕的活动 → 新增两项文本字段
    - 是否使用药物（可选：药物说明）→ 新增 `medication_used` + `medication_note`
  - 保持旧数据兼容：若历史记录只有旧结构（例如仅存在 notes/triggers/interventions），页面读取时自动映射到新表单字段（让旧数据仍可展示）
- 视需要扩展 [History.jsx](file:///Users/zhilinyang/Desktop/health_recorder/frontend/src/pages/History.jsx)
  - 列表/详情展示新增字段（至少展示：疼痛/头晕/情绪评分、4 条活动行、睡眠/活动/用药摘要）
  - CSV 导出同步新增字段（避免只导出 `Notes.General` 导致信息缺失）
- 视需要扩展 [Trends.jsx](file:///Users/zhilinyang/Desktop/health_recorder/frontend/src/pages/Trends.jsx)
  - 可选：把 `mood_level` 纳入趋势可视化；不要求可先不做

## 后端改动（Schema + DB + CRUD）
- 扩展 Pydantic schema：[schemas.py](file:///Users/zhilinyang/Desktop/health_recorder/backend/app/schemas/schemas.py)
  - 在 `DailyRecordBase` 增加与前端一致的新字段：
    - `mood_level: int = 0`
    - `body_feeling_note/sleep_note/daily_activity_note: str = ""`
    - `pain_increasing_activities/pain_decreasing_activities: str = ""`
    - `dizziness_increasing_activities/dizziness_decreasing_activities: str = ""`
    - `medication_used: bool = False` + `medication_note: str = ""`
- 数据库迁移兼容：[database.py](file:///Users/zhilinyang/Desktop/health_recorder/backend/app/db/database.py)
  - 在启动初始化时检查 `daily_records` 现有列（`PRAGMA table_info`）
  - 若缺少上述新列，自动执行 `ALTER TABLE ... ADD COLUMN ...`（避免用户已有 `health_records.db` 需要手动重建）
- CRUD 写入更新：[crud.py](file:///Users/zhilinyang/Desktop/health_recorder/backend/app/db/crud.py)
  - `INSERT`/`UPDATE` 同步写入新列
  - 保持 `SELECT *` 的读取方式不变（自动带出新列）

## 数据兼容策略（避免旧数据丢失）
- 新字段落库为独立列（便于查询/导出），同时保留现有 `notes/triggers/interventions` 不动
- 读取旧记录时：
  - 若新列为空但旧 JSON 中存在等价信息，可做“展示层映射”（例如把旧 `notes.General` 作为 `body_feeling_note` 的兜底显示）

## 验证方式（改完即验）
- 后端：启动后创建/更新记录，确认 POST/GET 返回包含新增字段且持久化正确
- 前端：
  - 新建一条记录填满新字段，刷新后回填一致
  - History 列表/导出能看到新增字段

## 预计会改到的文件清单
- 前端：
  - [DailyRecord.jsx](file:///Users/zhilinyang/Desktop/health_recorder/frontend/src/pages/DailyRecord.jsx)
  - [History.jsx](file:///Users/zhilinyang/Desktop/health_recorder/frontend/src/pages/History.jsx)
  - （可选）[Trends.jsx](file:///Users/zhilinyang/Desktop/health_recorder/frontend/src/pages/Trends.jsx)
- 后端：
  - [schemas.py](file:///Users/zhilinyang/Desktop/health_recorder/backend/app/schemas/schemas.py)
  - [database.py](file:///Users/zhilinyang/Desktop/health_recorder/backend/app/db/database.py)
  - [crud.py](file:///Users/zhilinyang/Desktop/health_recorder/backend/app/db/crud.py)

确认后我会按上述方案直接开始改代码并跑通一次端到端验证。